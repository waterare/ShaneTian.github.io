<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>nohup：在Linux服务器后台跑程序</title>
      <link href="/2018/11/nohup.html"/>
      <url>/2018/11/nohup.html</url>
      
        <content type="html"><![CDATA[<p>一些时间长的命令经常需要在后台运行，但苦于通常我们都是通过PC去连接服务器，一直保持<code>ssh</code>连接是不太现实的，这时就需要一些命令使得断开<code>ssh</code>连接后服务器依旧在运行命令。<br><a id="more"></a></p><h2 id="命令后面加-amp-在后台运行"><a href="#命令后面加-amp-在后台运行" class="headerlink" title="命令后面加&amp;在后台运行"></a>命令后面加<code>&amp;</code>在后台运行</h2><p>用法：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python test.py &gt; test.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></p><p>其中：</p><blockquote><p><code>&gt;</code>表示将标准输出（STDOUT）重定向到<code>test.log</code>文件；<br><code>2&gt;&amp;1</code>表示将标准错误（STDERR）重定向到标准输出。<code>1</code>是标准输出的文件描述符，<code>2</code>是标准错误的文件描述符；<br><code>&amp;</code>表示将程序放到后台运行。</p></blockquote><p>这样，我们已经将命令放到了后台执行。但是，只要我们断开<code>ssh</code>连接，进程将会被终止，是因为我们运行命令的<code>session</code>属于<code>ssh</code>的子进程。</p><h2 id="nohup命令"><a href="#nohup命令" class="headerlink" title="nohup命令"></a><code>nohup</code>命令</h2><p>使用<code>nohup</code>即可实现断开<code>ssh</code>连接命令也不会被终止。<code>nohup</code>: no hang up.<br>用法：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup python test.py &gt; test.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></p><p>运行之后可通过<code>jobs</code>查看正在运行的任务。<br>重新登录之后使用<a href="https://suixinblog.cn/2018/10/ps-grep-tail.html#%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8">ps和grep命令</a>可查看后台进程，如<code>ps aux|grep python</code>可查看所有关于<code>python</code>的进程。<br><strong>注</strong>：以上方法适用于大部分命令，将下载和上传的任务放到后台也是很方便的～</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><blockquote><p><a href="http://iyuluo.com/2017/11/01/Linux-%E4%B8%8B%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8CPython%E8%84%9A%E6%9C%AC/" target="_blank" rel="noopener">http://iyuluo.com/2017/11/01/Linux-%E4%B8%8B%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8CPython%E8%84%9A%E6%9C%AC/</a><br><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/linux/l-cn-nohup/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 技术驿站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 命令行 </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linux三个命令：ps，grep，tail</title>
      <link href="/2018/10/ps-grep-tail.html"/>
      <url>/2018/10/ps-grep-tail.html</url>
      
        <content type="html"><![CDATA[<p>这几天在服务器上跑Python的几个程序，因为运行时间较长，所以涉及到后台运行的问题，顺便也深入了解了一下Linux的几个命令。<br><a id="more"></a></p><h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><p><code>ps</code>命令用来显示当前的进程。是Process Status的缩写。如果需要动态的显示进程，可以使用<code>top</code>命令。</p><h3 id="ps常用参数"><a href="#ps常用参数" class="headerlink" title="ps常用参数"></a><code>ps</code>常用参数</h3><ul><li><code>-A</code>，<code>-e</code>：列出所有的进程；</li><li><code>aux</code>：列出所有使用者的详细进程（<strong>最常用</strong>）；</li><li><code>u</code>：指定用户的进程；</li><li><code>r</code>：列出正在运行的程序；</li><li><code>T</code>：当前终端的所有进程。</li></ul><h3 id="输出列的含义"><a href="#输出列的含义" class="headerlink" title="输出列的含义"></a>输出列的含义</h3><p><center><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fwroxuknxrj319c07on2g.jpg" width="80%"></center><br>上图中的各列分别代表：</p><ul><li>USER：进程拥有者；</li><li>PID：进程的ID；</li><li>%CPU：CPU占用率；</li><li>%MEM：内存占用率；</li><li>VSE：该进程使用掉的虚拟内存量 (Kbytes)；</li><li>RSS：该进程占用的固定的内存量 (Kbytes)；</li><li>TTY：该进程是在那个终端机上面运作。若与终端机无关，则显示<code>?</code>；<code>tty1-tty6</code>是本机上面的登入者程序；<code>pts/0</code>等等则表示为由网络连接进主机的程序；</li><li>STAT：该程序目前的状态。<ul><li><code>R</code>：正在执行；</li><li><code>S</code>：睡眠状态。在等待某个条件的形成或接受到信号；</li><li><code>D</code>：不可中断。收到信号不唤醒和不可运行，进程必须等待直到有中断发生；</li><li><code>T</code>：终止。进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行；</li><li><code>Z</code>：僵死。进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放；</li><li><code>&lt;</code>：高优先级进程；</li><li><code>N</code>：低优先级进程；</li><li><code>s</code>：进程的领导者（在它之下有子进程）；</li><li><code>l</code>：多进程，克隆线程；</li><li><code>+</code>：位于后台的进程组。</li></ul></li><li>START：进程启动时间和日期；</li><li>TIME：进程使用的总cpu时间；</li><li>COMMAND：正在执行的命令行命令。</li></ul><h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><p><code>grep</code>命令用于查找文件里符合条件的字符串。<br>使用格式：<code>grep [option] pattern file</code></p><h3 id="grep常用参数"><a href="#grep常用参数" class="headerlink" title="grep常用参数"></a>grep常用参数</h3><ul><li><code>i</code>：忽略大小写；</li><li><code>r</code>：递归的查找（<strong>当查找一个目录而不是文件时必须加上</strong>）；</li><li><code>v</code>：反向查找。显示不包含匹配文本的行；</li><li><code>*py</code>：在<code>file</code>处可直接指定文件后缀。</li></ul><p><strong>注</strong>：<code>pattern</code>可使用正则表达式。</p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>在当前目录的后缀为<code>.py</code>的文件中查找<code>import</code></p><p><center><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fwrpxzd3msj311k0eqaj9.jpg" width="80%"></center><br>在目录<code>/code</code>中递归地查找<code>import</code></p><p><center><img src="https://ws3.sinaimg.cn/large/006tNbRwgy1fwrq0pd5u9j314i0eqk1w.jpg" width="80%"></center><br>在当前目录文件名包含<code>t</code>的文件中查找不包含<code>=</code>的内容</p><p><center><img src="https://ws4.sinaimg.cn/large/006tNbRwgy1fwrq3utbgvj30zm0g245w.jpg" width="80%"></center></p><h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><p>用于查看文件的内容，有一个常用的参数<code>-f</code>常用于查阅正在改变的日志文件。<br>使用格式：<code>tail [parameter] file</code></p><h3 id="tail常用参数"><a href="#tail常用参数" class="headerlink" title="tail常用参数"></a>tail常用参数</h3><ul><li><code>-f</code>：循环读取。对于正在修改的文件比较有用（如日志文件）；</li><li><code>-n</code>：显示文件最后几行；</li><li><code>-s</code>：与<code>-f</code>合用，表示在每次循环间隙几秒。</li></ul><h2 id="组合使用"><a href="#组合使用" class="headerlink" title="组合使用"></a>组合使用</h2><p>最经典的用法：使用<code>Linux</code>的终端中的<strong>管道符号</strong><code>|</code><sup><a href="#fn_1" id="reffn_1">1</a></sup>在进程中查找，如<code>ps aux|grep python</code>；<br>实现按照进程的CPU占用率/内存占用率排序：<code>ps aux --sort -pcpu</code>或<code>ps aux --sort -pmem</code>；<br>只输出少量信息（按<code>enter</code>查看更多）：<code>ps aux --sort -pcpu|less</code></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.runoob.com/linux" target="_blank" rel="noopener">http://www.runoob.com/linux</a><br><a href="http://www.cnblogs.com/peida" target="_blank" rel="noopener">http://www.cnblogs.com/peida</a><br><a href="https://www.jianshu.com/p/e1abfb1d9e8d" target="_blank" rel="noopener">https://www.jianshu.com/p/e1abfb1d9e8d</a></p><blockquote id="fn_1"><sup>1</sup>. 用法: <code>command1 | command2</code>，它的功能是把第一个命令<code>command 1</code>执行的结果作为<code>command 2</code>的输入传给<code>command 2</code><a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 命令行 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>线性分类模型(四)——贝叶斯观点下的Logistic回归</title>
      <link href="/2018/10/linear-classification4.html"/>
      <url>/2018/10/linear-classification4.html</url>
      
        <content type="html"><![CDATA[<h2 id="拉普拉斯近似"><a href="#拉普拉斯近似" class="headerlink" title="拉普拉斯近似"></a>拉普拉斯近似</h2><p>目标：因为待近似的分布$p(\pmb{z})$不是高斯分布，故寻找一个高斯近似$q(\pmb{z})$，它的中心位于$p(\pmb{z})$的众数的位置。<br>思路：将待近似的分布$p(\pmb{z})$在众数$\pmb{z}_0$做泰勒展开，去掉三阶项以及更高阶。<br><a id="more"></a><br>假设待近似分布为$M$维$p(\pmb{z})=\frac{f(\pmb{z})}{Z}$，在众数$\pmb{z}_0$处展开，有</p><script type="math/tex; mode=display">\ln f(\pmb{z})\simeq \ln f(\pmb{z}_0)-\frac{1}{2}(\pmb{z}-\pmb{z}_0)^\top A(\pmb{z}-\pmb{z}_0)</script><p>其中，$M\times M$的Hessian矩阵$A=-\nabla\nabla\ln f(\pmb{z})|_{\pmb{z}=\pmb{z}_0}$。两边同取指数，有</p><script type="math/tex; mode=display">f(\pmb{z})\simeq f(\pmb{z}_0)\exp\{-\frac{1}{2}(\pmb{z}-\pmb{z}_0)^\top A(\pmb{z}-\pmb{z}_0)\}</script><p>分布$q(\pmb{z})$正比于$f(\pmb{z})$，因此</p><script type="math/tex; mode=display">q(\pmb{z})=\frac{|A|^\frac{1}{2}}{(2\pi )^\frac{M}{2}}\exp\{-\frac{1}{2}(\pmb{z}-\pmb{z}_0)^\top A(\pmb{z}-\pmb{z}_0)\}=\mathscr{N}(\pmb{z}|\pmb{z}_0,A^{-1})</script><p>其中，这个高斯分布well-define的前提为$A$是正定的，即驻点$\pmb{z}_0$必须为一个局部极大值。在实际应用拉普拉斯近似时需计算众数，一般通过数值优化算法得到。<br><strong>缺点：</strong>对于多峰问题会给出较差的结果。<br><strong>优点：</strong>在数据点较多的情况下，会更有用。</p><h2 id="贝叶斯Logistic回归"><a href="#贝叶斯Logistic回归" class="headerlink" title="贝叶斯Logistic回归"></a>贝叶斯Logistic回归</h2><p>Logistic回归不能进行精确的贝叶斯推断的原因：后验分布为先验分布与似然函数的乘积的归一化，而似然函数为一系列sigmoid函数的乘积。</p><h3 id="对后验分布做拉普拉斯近似"><a href="#对后验分布做拉普拉斯近似" class="headerlink" title="对后验分布做拉普拉斯近似"></a>对后验分布做拉普拉斯近似</h3><p>假设参数$\pmb{w}$有高斯先验</p><script type="math/tex; mode=display">p(\pmb{w})=\mathscr{N}(\pmb{w}|\pmb{m}_0,S_0)</script><p>其中，$\pmb{m}_0$和$S_0$为固定的超参数。$\pmb{w}$的后验分布为</p><script type="math/tex; mode=display">p(\pmb{w}|\textbf{t})\propto p(\pmb{w})p(\textbf{t}|\pmb{w})</script><p>化简可得对数后验为</p><script type="math/tex; mode=display">\ln p(\pmb{w}|\textbf{t})=-\frac{1}{2}(\pmb{w}-\pmb{m}_0)^\top S_0^{-1}(\pmb{w}-\pmb{m}_0)+\sum_{n=1}^N\{t_n\ln y_n+(1-t_n)\ln(1-y_n)\}+Constant</script><p>其中，符号与上一篇文章一致。现在，只需极大化后验概率分布，求出MAP解$\pmb{w}_{MAP}$，再根据前面的拉普拉斯近似结果可得后验分布的高斯近似为</p><script type="math/tex; mode=display">q(\pmb{w})=\mathscr{N}(\pmb{w}|\pmb{w}_{MAP},S_N)</script><p>其中，</p><script type="math/tex; mode=display">S_N^{-1}=-\nabla\nabla\ln p(\pmb{w}|\textbf{t})=S_0^{-1}+\sum_{n=1}^Ny_n(1-y_n)\pmb{\phi}_n\pmb{\phi}_n^\top</script><h3 id="预测分布"><a href="#预测分布" class="headerlink" title="预测分布"></a>预测分布</h3><p>给定一个新的特征向量$\phi(\pmb{x})$，类别$C_1$的预测分布可对后验概率$p(\pmb{w}|\textbf{t})$积分得到</p><script type="math/tex; mode=display">p(C_1|\pmb{\phi},\textbf{t})=\int p(C_1|\pmb{\phi},\pmb{w})p(\pmb{w}|\textbf{t})d\pmb{w}\simeq\int \sigma(\pmb{w}^\top \pmb{\phi})q(\pmb{w})d\pmb{w}</script><p>具体求解预测分布过程见参考$\S4.5.2$。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://xueshu.baidu.com/s?wd=paperuri%3A%28039d5c0802df10a9c04decf174c5409d%29&amp;filter=sc_long_sign&amp;sc_ks_para=q%3DPattern%20Recognition%20and%20Machine%20Learning%20%28Information%20Science%20and%20Statistics%29&amp;sc_us=9652015233931872413&amp;tn=SE_baiduxueshu_c1gjeupa&amp;ie=utf-8" target="_blank" rel="noopener">“Pattern Recognition and Machine Learning”</a></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 分类 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>线性分类模型(三)——判别式模型</title>
      <link href="/2018/10/linear-classification3.html"/>
      <url>/2018/10/linear-classification3.html</url>
      
        <content type="html"><![CDATA[<p>判别式方法：直接对条件概率分布$p(C_k|\pmb{x})$进行建模。<br>相比生成式方法有两个优点：需要训练的参数更少，预测表现会提升（尤其当类条件概率密度的假设没有很好的近似真实分布的时候）。</p><h2 id="logistic回归"><a href="#logistic回归" class="headerlink" title="logistic回归"></a>logistic回归</h2><a id="more"></a><p>对于二分类问题，类别$C_1$的后验概率为</p><script type="math/tex; mode=display">p(C_1|\pmb{\phi})=y(\pmb{\phi})=\sigma(\pmb{w}^\top\pmb{\phi})</script><p>可见，对于$M$维特征空间$\pmb{\phi}$，该模型只有$M$个可调节参数，而生成式模型需要调节参数总数为$\frac{M(M+5)}{2}+1$。<br>对于一个数据集$\{\pmb{\phi}_n,t_n\}$，其中，$t_n\in \{0,1\}$且$\pmb{\phi}_n=\phi(\pmb{x}_n)$，$n=1,2,\cdots,N$。<br>似然函数为</p><script type="math/tex; mode=display">p(\textbf{t}|\pmb{w})=\prod_{n=1}^Ny_n^{t_n}(1-y_n)^{1-t_n}</script><p>其中，$\textbf{t}=(t_1,t_2,\cdots,t_N)^\top$。<strong>通过对似然函数取负对数的方式定义一个误差函数，即交叉熵（cross-entropy）误差函数</strong></p><script type="math/tex; mode=display">E(\pmb{w})=-\ln p(\textbf{t}|\pmb{w})=-\sum_{n=1}^N\{t_n\ln y_n+(1-t_n)\ln(1-y_n)\}</script><p>对$\pmb{w}$求梯度，可得</p><script type="math/tex; mode=display">\nabla E(\pmb{w})=\sum_{n=1}^N(y_n-t_n)\pmb{\phi}_n=\Phi^\top(\textbf{y}-\textbf{t})</script><p><strong>注：</strong>最大似然方法对于线性可分的数据集会产生严重的过拟合。</p><h2 id="迭代重加权最小平方（IRLS）"><a href="#迭代重加权最小平方（IRLS）" class="headerlink" title="迭代重加权最小平方（IRLS）"></a>迭代重加权最小平方（IRLS）</h2><p>logistic回归不再有解析解，故需要用Newton-Raphson迭代</p><script type="math/tex; mode=display">\pmb{w}^{new}=\pmb{w}^{old}-H^{-1}\nabla E(\pmb{w})</script><p>其中，$H$是Hessian矩阵，其元素为$E(\pmb{w})$关于$\pmb{w}$的二阶导数。<br>推导可得</p><script type="math/tex; mode=display">H=\nabla\nabla E(\pmb{w})=\sum_{n=1}^Ny_n(1-y_n)\pmb{\phi}_n\pmb{\phi}_n^\top=\Phi^\top R\Phi</script><p>其中，$N\times N$的对角矩阵$R$元素为$R_{nn}=y_n(1-y_n)$。由于$o&lt;y_n&lt;1$，故对任意向量$u$都有$u^\top Hu&gt;0$，即$H$正定，因此误差函数是$\pmb{w}$的凸函数，有唯一最小值。</p><h2 id="softmax分类"><a href="#softmax分类" class="headerlink" title="softmax分类"></a>softmax分类</h2><p>对于多分类问题，后验概率为</p><script type="math/tex; mode=display">p(C_k|\pmb{\phi})=y_k(\pmb{\phi})=\frac{\exp(a_k)}{\sum_j\exp(a_j)}</script><p>其中，$a_k=\pmb{w}_k^\top\pmb{\phi}$。求导，有</p><script type="math/tex; mode=display">\frac{\partial y_k}{\partial a_j}=\begin{cases} y_k(1-y_k), & j=k \\ -y_ky_j, & j\neq k \end{cases}</script><p>从而，似然函数为</p><script type="math/tex; mode=display">p(T|\pmb{w}_1,\cdots,\pmb{w}_K)=\prod_{n=1}^N\prod_{k=1}^Kp(C_k|\pmb{\phi}_n)^{t_{nk}}=\prod_{n=1}^N\prod_{k=1}^Ky_{nk}^{t_{nk}}</script><p>其中，$y_{nk}=y_k(\pmb{\phi}_n)$，$T$是一个$N\times K$的矩阵，元素$t_{nk}$为1-of-K编码值。<br>交叉熵误差函数为</p><script type="math/tex; mode=display">E(\pmb{w}_1,\cdots,\pmb{w}_K)=-\ln p(T|\pmb{w}_1,\cdots,\pmb{w}_K)=-\sum_{n=1}^N\sum_{k=1}^Kt_{nk}\ln y_{nk}</script><p>同样利用Newton-Raphson迭代可求解。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://xueshu.baidu.com/s?wd=paperuri%3A%28039d5c0802df10a9c04decf174c5409d%29&amp;filter=sc_long_sign&amp;sc_ks_para=q%3DPattern%20Recognition%20and%20Machine%20Learning%20%28Information%20Science%20and%20Statistics%29&amp;sc_us=9652015233931872413&amp;tn=SE_baiduxueshu_c1gjeupa&amp;ie=utf-8" target="_blank" rel="noopener">“Pattern Recognition and Machine Learning”</a></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 分类 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Python命令行解析器argparse的使用</title>
      <link href="/2018/10/argparse.html"/>
      <url>/2018/10/argparse.html</url>
      
        <content type="html"><![CDATA[<p>argparse是Python内置的一个用于命令项选项与参数解析的模块，在编写脚本的过程中是非常常用的。<br>在其使用中主要包含三个步骤：<br><a id="more"></a><br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">'this is a process for read file'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'fileinPath'</span>, help=<span class="string">'path to input file'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'fileoutPath'</span>, help=<span class="string">'path to output file'</span>)</span><br><span class="line">args = parser.parse_args()</span><br></pre></td></tr></table></figure></p><p>而当如上定义后，即可在需要用到参数的地方调用<code>args.fileinPath</code>和<code>args.fileoutPath</code>。下面详细讲解一下<code>add_argument()</code>方法。</p><h2 id="add-argument-方法"><a href="#add-argument-方法" class="headerlink" title="add_argument()方法"></a><code>add_argument()</code>方法</h2><h3 id="位置参数"><a href="#位置参数" class="headerlink" title="位置参数"></a>位置参数</h3><p>位置参数是必选参数，如果命令行解析不到就会报错，上面例子中两个参数都是位置参数。</p><h3 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h3><p>可选参数可以填写两种，长的可选参数以及短的，并且可以并存，会首先解析长可选参数。如：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'-s'</span>, <span class="string">'--square'</span>, help=<span class="string">'display a square of a given number'</span>, type=int)</span><br></pre></td></tr></table></figure></p><p>当然在一个脚本中，位置参数与可选参数是可以并存的。</p><h3 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h3><p>给一个整数序列，输出它们的和或最大值（默认）<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">'Process some integers.'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'integers'</span>, metavar=<span class="string">'N'</span>, type=int, nargs=<span class="string">'+'</span>,</span><br><span class="line">                   help=<span class="string">'an integer for the accumulator'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'--sum'</span>, dest=<span class="string">'accumulate'</span>, action=<span class="string">'store_const'</span>,</span><br><span class="line">                   const=sum, default=max,</span><br><span class="line">                   help=<span class="string">'sum the integers (default: find the max)'</span>)</span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">print(args.accumulate(args.integers))</span><br></pre></td></tr></table></figure></p><p>则在调用的时候：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; python test.py</span></span><br><span class="line">usage: test.py [-h] [--sum] N [N ...]</span><br><span class="line">test.py: error: the following arguments are required: N</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; python test.py -h</span></span><br><span class="line">usage: test.py [-h] [--sum] N [N ...]</span><br><span class="line"></span><br><span class="line">Process some integers.</span><br><span class="line"></span><br><span class="line">positional arguments:</span><br><span class="line">  N           an integer for the accumulator</span><br><span class="line"></span><br><span class="line">optional arguments:</span><br><span class="line">  -h, --help  show this help message and exit</span><br><span class="line">  --sum       sum the integers (default: find the max)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; python test.py 1 2 3 4</span></span><br><span class="line">4</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; python test.py 1 2 3 4 --sum</span></span><br><span class="line">10</span><br></pre></td></tr></table></figure></p><h3 id="所有参数"><a href="#所有参数" class="headerlink" title="所有参数"></a>所有参数</h3><ul><li><code>name or flags</code> - 选项字符串的名字或者列表，例如<code>foo</code>或者<code>-f</code>，<code>--foo</code>；</li><li><p><code>action</code> - 命令行遇到参数时的动作，默认值是<code>store</code>；</p><ul><li><code>store_const</code>，表示赋值为<code>const</code>。意思为如果能解析到该参数，则该参数赋值为<code>const</code>的值，见上个例子；</li><li><code>store_true</code>和<code>store_false</code>，参数默认值分别为<code>False</code>和<code>True</code>。意思为如果能解析到该参数，则参数值分别改为<code>True</code>和<code>False</code>；</li><li><p><code>append</code>，将遇到的值存储成<code>list</code>，也就是如果参数重复则会保存多个值。如：</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; import argparse</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser = argparse.ArgumentParser()</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser.add_argument(<span class="string">'--foo'</span>, action=<span class="string">'append'</span>, <span class="built_in">type</span>=int)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser.parse_args(<span class="string">'--foo 1 --foo 2'</span>.split())</span></span><br><span class="line">Namespace(foo = [1, 2])</span><br></pre></td></tr></table></figure></li><li><p><code>append_const</code>，将固定值保存成一个<code>list</code>。意思为如果能解析道该参数，则<code>list</code>将会<code>append</code>一个<code>const</code>进来。如：</p>  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'--str'</span>, dest=<span class="string">'types'</span>, action=<span class="string">'append_const'</span>, const=str)</span><br><span class="line">parser.add_argument(<span class="string">'--int'</span>, dest=<span class="string">'types'</span>, action=<span class="string">'append_const'</span>, const=int)</span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">print(args)</span><br></pre></td></tr></table></figure><p>  在命令行：</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; python test.py --str --str --int</span></span><br><span class="line">Namespace(types=[&lt;class 'str'&gt;, &lt;class 'str'&gt;, &lt;class 'int'&gt;])</span><br></pre></td></tr></table></figure></li><li><p><code>count</code>，存储遇到的参数次数。</p></li><li><p><code>nrgs</code> - 应该读取的命令行参数个数，可以是具体的数字、<code>*</code>、<code>+</code>和<code>?</code>。<code>*</code>表示0个或多个；<code>+</code>表示1个或多个；<code>?</code>时，若解析不到参数，则使用<code>default</code>值，对于可选参数，若只写了参数名而后面没有值，则使用<code>const</code>值。如</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser = argparse.ArgumentParser()</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser.add_argument(<span class="string">'--foo'</span>, nargs=<span class="string">'?'</span>, const=<span class="string">'c'</span>, default=<span class="string">'d'</span>)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser.add_argument(<span class="string">'bar'</span>, nargs=<span class="string">'?'</span>, default=<span class="string">'d'</span>)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser.parse_args([<span class="string">'XX'</span>, <span class="string">'--foo'</span>, <span class="string">'YY'</span>])</span></span><br><span class="line">Namespace(bar='XX', foo='YY')</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser.parse_args([<span class="string">'XX'</span>, <span class="string">'--foo'</span>])</span></span><br><span class="line">Namespace(bar='XX', foo='c')</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; parser.parse_args([])</span></span><br><span class="line">Namespace(bar='d', foo='d')</span><br></pre></td></tr></table></figure><p><strong>注：</strong><code>nargs=1</code>会将参数存放为<code>list</code>，不同于不设置；对参数加<code>nargs=&#39;*&#39;</code>或<code>nargs=&#39;+&#39;</code>在一定程度可以代替<code>action=&#39;append&#39;</code>。</p></li></ul></li><li><code>const</code> - <code>action</code>和<code>nargs</code>所需要的常量值；</li><li><code>default</code> - 不指定参数时的默认值；</li><li><code>type</code> - 命令行参数应该被转换成的类型；</li><li><code>choices</code> - 参数可允许的值的一个容器。可以是<code>list</code>和<code>range</code>；</li><li><code>required</code> - 可选参数是否可以省略 (仅针对可选参数)。如果设置<code>required=&#39;True&#39;</code>，则可选参数解析不到时报错；</li><li><code>metavar</code> - 在 usage 说明中的参数名称，对于位置参数默认就是参数名称，对于可选参数默认是全大写的参数名称；</li><li><code>dest</code> - 解析后的参数名称，默认情况下，对于可选参数选取最长的名称，中划线转换为下划线。</li></ul><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://wiki.jikexueyuan.com/project/explore-python/Standard-Modules/argparse.html" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/explore-python/Standard-Modules/argparse.html</a><br><a href="https://docs.python.org/3/library/argparse.html#the-add-argument-method" target="_blank" rel="noopener">https://docs.python.org/3/library/argparse.html#the-add-argument-method</a></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>git常用命令</title>
      <link href="/2018/10/git.html"/>
      <url>/2018/10/git.html</url>
      
        <content type="html"><![CDATA[<p>让我们一起学习如何使用git进行版本管理吧！<br><a id="more"></a></p><style>table th:nth-of-type(2) {    width: 300px;}</style><div class="table-container"><table><thead><tr><th>操作</th><th>命令</th><th>备注</th></tr></thead><tbody><tr><td>将远程仓库克隆到本地</td><td>git clone ‘url’</td><td>url地址可选SSH或HTTPS</td></tr><tr><td>创建新的本地仓库</td><td>git init</td><td></td></tr><tr><td>添加文件或目录到索引</td><td>git add ‘filepattern’</td><td>filepattern可以指定多个文件名，或指定通配字符（如’.txt’），’.’代表所有文件</td></tr><tr><td>提交追加到索引的文件</td><td>git commit -m ‘info’</td><td>-m参数将’info’内容作为提交注释</td></tr><tr><td>显示修改文件清单</td><td>git status</td><td></td></tr><tr><td>查看修改文件的差异</td><td>git diff</td><td></td></tr><tr><td>显示提交记录</td><td>git log</td><td></td></tr><tr><td>修改，移动文件的名称或目录的名称</td><td>git mv ‘oldfilename’ ‘newfilename’</td><td></td></tr><tr><td>删除文件</td><td>git rm ‘filename’</td><td></td></tr><tr><td>还原文件修改</td><td>git checkout - -‘filename’</td><td>若文件未添加到索引，则恢复到与版本库一致状态；若已添加至索引，则恢复到添加之后修改之前的状态</td></tr><tr><td>删除已添加到索引的文件</td><td>git reset HEAD - -‘filename’</td><td></td></tr><tr><td>在本地添加远程库</td><td>git remote add origin ‘url’</td><td></td></tr><tr><td>显示远程数据库列表</td><td>git remote -v</td><td>-v参数表示列出仓库的详细情况</td></tr><tr><td>查看已有分支</td><td>git branch -av</td><td>当前分支前会显示*</td></tr><tr><td>创建分支</td><td>git branch -b ‘branchname’</td><td>-b参数表示创建并切换</td></tr><tr><td>切换到某分支</td><td>git checkout ‘branch’</td><td></td></tr><tr><td>把当前分支推送到远程</td><td>git push -u ‘remote’ ‘branch’</td><td>例git push -u origin master</td></tr><tr><td>查看远程仓库修改内容，并合并到本地库</td><td>git pull ‘remote’ ‘branch’</td><td>若省略’branch’则当前分支作为合并目标</td></tr><tr><td>查看远程仓库修改内容，但不合并到本地库</td><td>git fetch ‘remote’</td><td></td></tr><tr><td>合并某分支到当前分支</td><td>git merge - -no-ff ‘branch’</td><td>- -no-ff参数表示禁止fast-forward模式</td></tr><tr><td>删除分支</td><td>git branch -d ‘branchname’</td></tr></tbody></table></div><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://pan.baidu.com/s/1kU5OCOB#list/path=%2F&amp;parentPath=%2F" target="_blank" rel="noopener">Git Cheat Sheet</a><br><a href="https://backlog.com/git-tutorial/cn/" target="_blank" rel="noopener">猴子都能懂的git入门</a><br><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">廖雪峰git教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Python中list的查找</title>
      <link href="/2018/10/list-index.html"/>
      <url>/2018/10/list-index.html</url>
      
        <content type="html"><![CDATA[<p>Python中查找list中某个固定元素是常有的事，对于两种不同的查找有两种不同的解决方案，见下。</p><h2 id="查找元素首次出现的位置"><a href="#查找元素首次出现的位置" class="headerlink" title="查找元素首次出现的位置"></a>查找元素首次出现的位置</h2><p>list自带的方法index可以找出某元素在list中首次出现的位置。用法为<br><a id="more"></a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.index(element, start, end)</span><br></pre></td></tr></table></figure></p><p>其中，<code>start</code>为开始搜索的位置，默认为0；<code>end</code>为结束搜索的位置，默认为list长度。示例：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">res = l.index(<span class="number">1</span>)</span><br><span class="line">print(res, type(res))</span><br></pre></td></tr></table></figure></p><p>则输出结果为<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 &lt;class 'int'&gt;</span><br></pre></td></tr></table></figure></p><p>若限定搜索范围（可只指定其中某一个）：<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">res = l.index(<span class="number">1</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">print(res, type(res))</span><br></pre></td></tr></table></figure></p><p>则输出结果为<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 &lt;class 'int'&gt;</span><br></pre></td></tr></table></figure></p><h2 id="查找元素出现的所有位置"><a href="#查找元素出现的所有位置" class="headerlink" title="查找元素出现的所有位置"></a>查找元素出现的所有位置</h2><p>若想找出某一元素在该list中的所有出现位置，则用一个循环来简单的实现。<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">res = [idx <span class="keyword">for</span> idx, i <span class="keyword">in</span> l <span class="keyword">if</span> i == <span class="number">1</span>]</span><br><span class="line">print(res, type(res))</span><br></pre></td></tr></table></figure></p><p>则输出结果为<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0, 3] &lt;class 'list'&gt;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo中的LaTex公式渲染问题</title>
      <link href="/2018/10/hexo-latex.html"/>
      <url>/2018/10/hexo-latex.html</url>
      
        <content type="html"><![CDATA[<p>Markdown中插入数学公式是常有的事，而Hexo博客框架主要是Markdown格式的文档，如果不能正常渲染Latex公式，那岂不gg……<br>下面来看看Hexo渲染数学公式遇到的问题以及解决方案。</p><h2 id="渲染下划线的问题"><a href="#渲染下划线的问题" class="headerlink" title="渲染下划线的问题"></a>渲染下划线的问题</h2><a id="more"></a><p><code>_</code>在Latex公式中代表脚标，是非常常用的符号，而在Markdown中代表<em>斜体</em>，如果直接使用，将会产生公式无法渲染的问题，因为被Hexo强制渲染成了<code>&lt;em&gt;</code>标签。<br>如何解决呢？<strong>更换Hexo默认的Markdown渲染引擎！</strong><br>Hexo默认的渲染引擎为hexo-renderer-marked，这里将其更换为hexo-renderer-kramed，该引擎在前者的基础上修复了一些bug，具体操作：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure></p><h2 id="行内公式的问题"><a href="#行内公式的问题" class="headerlink" title="行内公式的问题"></a>行内公式的问题</h2><p>执行上述操作后，虽然块状公式的渲染问题解决了，但发现行内公式仍然是老样子，无法成功渲染，这是因为hexo-renderer-kramed也有语义冲突的问题，这里我们直接修改转义即可。打开文件<code>\node_modules\kramed\lib\rules\inline.js</code>，修改其中一行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  em: /^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,</span></span><br><span class="line">  em: <span class="regexp">/^\*((?:\*\*|[\s\S])+?)\*(?!\*)/</span>,</span><br></pre></td></tr></table></figure></p><p>把之前的<code>em</code>转义注释掉，添加新的即可完美解决。</p><h2 id="双花括号的问题"><a href="#双花括号的问题" class="headerlink" title="双花括号的问题"></a>双花括号的问题</h2><p>除此之外，如果在公式内连续使用两个花括号，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\frac&#123;1&#125;&#123;&#123;(2\pi)&#125;^\frac&#123;D&#125;&#123;2&#125;&#125;</span><br></pre></td></tr></table></figure></p><p>时会渲染失败</p><p><center><img src="https://ws2.sinaimg.cn/large/006tNbRwgy1fw6fw1wt83j31080p6nah.jpg" width="50%" height="50%"></center><br>此时必须在两个花括号中间加一个<strong>空格</strong>，<code>\frac{1}{ {(2\pi)}^\frac{D}{2} }</code>即可正常渲染$\frac{1}{ {(2\pi)}^\frac{D}{2} }$<br><strong>注</strong>：上述操作完成后均需重启Hexo，即<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.jianshu.com/p/7ab21c7f0674" target="_blank" rel="noopener">https://www.jianshu.com/p/7ab21c7f0674</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术驿站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网站建设 </tag>
            
            <tag> Hexo </tag>
            
            <tag> LaTex </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>线性分类模型(二)——生成式模型</title>
      <link href="/2018/10/linear-classification2.html"/>
      <url>/2018/10/linear-classification2.html</url>
      
        <content type="html"><![CDATA[<p>生成式方法：对<strong>类条件概率密度</strong>$p(\pmb{x}|C_k)$和<strong>类先验概率分布</strong>$p(C_k)$建模，然后使用贝叶斯定理计算后验概率密度$p(C_k|\pmb{x})$，从而进行预测。<br><a id="more"></a></p><h2 id="二分类模型"><a href="#二分类模型" class="headerlink" title="二分类模型"></a>二分类模型</h2><p>类别$C_1$的后验概率为</p><script type="math/tex; mode=display">p(C_1|\pmb{x})=\frac{p(\pmb{x}|C_1)p(C_1)}{p(\pmb{x}|C_1)p(C_1)+p(\pmb{x}|C_2)p(C_2)}=\frac{1}{1+\exp(-a)}\triangleq\sigma(a)</script><p>其中，$a=\ln\frac{p(\pmb{x}|C_1)p(C_1)}{p(\pmb{x}|C_2)p(C_2)}$，$\sigma(a)$是sigmoid函数。<br>假设类条件概率密度是高斯分布，且所有的类别协方差阵相同。则</p><script type="math/tex; mode=display">p(\pmb{x}|C_k)=\frac{1}{ {(2\pi)}^\frac{D}{2} }\frac{1}{|\Sigma|^\frac{1}{2}}\exp\{-\frac{1}{2}(\pmb{x}-\pmb{\mu}_k)^\top\Sigma^{-1}(\pmb{x}-\pmb{\mu}_k)\}</script><p>则后验可化为</p><script type="math/tex; mode=display">p(C_1|\pmb{x})=\sigma(\pmb{w}^\top\pmb{x}+w_0)</script><p>其中，定义了$\pmb{w}=\Sigma^{-1}(\pmb{\mu}_1-\pmb{\mu}_2)$，$w_0=-\frac{1}{2}\pmb{\mu}_1^\top\Sigma^{-1}\pmb{\mu}_1+\frac{1}{2}\pmb{\mu}_2^\top\Sigma^{-1}\pmb{\mu}_2+\ln\frac{p(C_1)}{p(C_2)}$</p><h2 id="多分类模型"><a href="#多分类模型" class="headerlink" title="多分类模型"></a>多分类模型</h2><p>类别$C_k$的后验概率为</p><script type="math/tex; mode=display">p(C_k|\pmb{x})=\frac{p(\pmb{x}|C_k)p(C_k)}{\sum_jp(\pmb{x}|C_j)p(C_j)}=\frac{\exp(a_k)}{\sum_j\exp(a_j)}\triangleq softmax_k(\pmb{a})</script><p>其中，$a_k=\ln (p(\pmb{x}|C_k)p(C_k))$。<br>在同样的高斯分布和类别协方差阵假设下，有</p><script type="math/tex; mode=display">a_k(\pmb{x})=\pmb{w}_k^\top\pmb{x}+w_{k0}</script><p>其中，$\pmb{w}_k=\Sigma^{-1}\pmb{\mu}_k$，$w_{k0}=-\frac{1}{2}\pmb{\mu}_k^\top\Sigma^{-1}\pmb{\mu}_k+\ln p(C_k)$</p><h2 id="极大似然解"><a href="#极大似然解" class="headerlink" title="极大似然解"></a>极大似然解</h2><p>首先考虑二分类的情形。<br>假设有一个数据集$\{\pmb{x}_n,t_n\}$，其中$n=1,2,\cdots,N$。$t_n=1,0$分别表示类别$C_1,C_2$，把先验记为$p(C_1)=\pi$，则有</p><script type="math/tex; mode=display">p(\pmb{x}_n,C_1)=p(C_1)p(\pmb{x}_n|C_1)=\pi\mathscr{N}(\pmb{x}_n|\pmb{\mu}_1,\Sigma)</script><p>根据全概率公式可得<strong>似然函数</strong>为</p><script type="math/tex; mode=display">p(\textbf{t}|\pi,\mu_1,\mu_2,\Sigma)=\prod_{n=1}^{N}[\pi\mathscr{N}(\pmb{x}_n|\pmb{\mu}_1,\Sigma)]^{t_n}[(1-\pi)\mathscr{N}(\pmb{x}_n|\pmb{\mu}_2,\Sigma)]^{1-t_n}</script><p>其中，$\textbf{t}=(t_1,t_2,\cdots,t_N)^\top$。<br>分别对各个参数求导可得极大似然解为</p><script type="math/tex; mode=display">\pi=\frac{1}{N}\sum_{n=1}^Nt_n=\frac{N_1}{N}\\\pmb{\mu}_1=\frac{1}{N_1}\sum_{n=1}^Nt_n\pmb{x}_n\\\pmb{\mu}_2=\frac{1}{N_2}\sum_{n=1}^N(1-t_n)\pmb{x}_n\\\Sigma=S=\frac{N_1}{N}S_1+\frac{N_2}{N}S_2</script><p>其中，$S_1=\frac{1}{N_1}\sum_{n\in C_1}(\pmb{x}_n-\pmb{\mu}_1)(\pmb{x}_n-\pmb{\mu}_1)^\top$，$S_2=\frac{1}{N_2}\sum_{n\in C_2}(\pmb{x}_n-\pmb{\mu}_2)(\pmb{x}_n-\pmb{\mu}_2)^\top$。详细求解过程见参考。<br>而对于多分类问题，很容易得到极大似然解。<br><strong>注</strong>：该方法对于离群点不鲁棒。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://xueshu.baidu.com/s?wd=paperuri%3A%28039d5c0802df10a9c04decf174c5409d%29&amp;filter=sc_long_sign&amp;sc_ks_para=q%3DPattern%20Recognition%20and%20Machine%20Learning%20%28Information%20Science%20and%20Statistics%29&amp;sc_us=9652015233931872413&amp;tn=SE_baiduxueshu_c1gjeupa&amp;ie=utf-8" target="_blank" rel="noopener">“Pattern Recognition and Machine Learning”</a></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 分类 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>线性分类模型(一)——线性判别函数</title>
      <link href="/2018/10/linear-classification1.html"/>
      <url>/2018/10/linear-classification1.html</url>
      
        <content type="html"><![CDATA[<p>线性分类模型主要有四种不同的方法，线性判别函数、生成式模型、判别式模型以及贝叶斯观点下的Logistic回归。我们直接考虑对原始输入空间$\pmb{x}$进行分类，当然也适用于对输入变量进行一个固定的变换$\phi(\pmb{x})$。<br>判别函数是一个以向量$\pmb{x}$为输入，把它直接分配到$K$个类别中的某一个类别（$C_k$）的函数。<br><a id="more"></a></p><h2 id="二分类"><a href="#二分类" class="headerlink" title="二分类"></a>二分类</h2><p>线性判别函数为</p><script type="math/tex; mode=display">y(\pmb{x})=\pmb{w}^\top\pmb{x}+w_0</script><p>如果$y(\pmb{x})\geqslant0$，则它被分到$C_1$中，否则被分到$C_2$中。</p><h2 id="多分类"><a href="#多分类" class="headerlink" title="多分类"></a>多分类</h2><h3 id="造成困难的方法"><a href="#造成困难的方法" class="headerlink" title="造成困难的方法"></a>造成困难的方法</h3><p><strong>‘one-versus-the-rest’</strong>方法使用$K-1$个分类器，每个分类器是一个二分类问题，分开属于$C_k$和不属于的部分。但是可能会产生输入空间无法分类的区域，如图所示。</p><p><center><img src="https://ws1.sinaimg.cn/large/006tNbRwly1fw27x8xbuuj30r80nyjsm.jpg" width="50%"></center><br><strong>‘one-versus-one’</strong>方法使用$\frac{K(K-1)}{2}$个分类器，每个数据点的类别根据这些判别函数中的大多数输出类别确定。但是这也可能会产生输入空间无法分类的区域，如图所示。</p><p><center><img src="https://ws2.sinaimg.cn/large/006tNbRwly1fw27zv6m6mj30ne0myta5.jpg" width="50%"></center></p><h3 id="正确的方法"><a href="#正确的方法" class="headerlink" title="正确的方法"></a>正确的方法</h3><p>引入一个$K$类判别函数可以避免上述问题。该函数由$K$个线性函数构成：</p><script type="math/tex; mode=display">y_k(\pmb{x})=\pmb{w}_k^\top\pmb{x}+w_{k0}</script><p>对于一个数据点$\pmb{x}$，如果$y_k(\pmb{x})$最大，就把它分到$C_k$中。于是类别$C_k$与$C_j$之间的决策面为$y_k(\pmb{x})=y_j(\pmb{x})$。这样的决策区域总是单连通的，并且是凸的。<br>对于二分类问题也可以构造基于两个线性函数$y_1(\pmb{x})$和$y_2(\pmb{x})$的判别函数，只是前述方法更简单且是等价的。</p><h3 id="分类的最小平方法（Least-Squares）求解参数矩阵"><a href="#分类的最小平方法（Least-Squares）求解参数矩阵" class="headerlink" title="分类的最小平方法（Least Squares）求解参数矩阵"></a>分类的最小平方法（Least Squares）求解参数矩阵</h3><p>对于一个一般的$K$分类问题，每个类别$C_k$有一个线性模型</p><script type="math/tex; mode=display">y_k(\pmb{x})=\pmb{w}_k^\top\pmb{x}+w_{k0}</script><p>使用矩阵记号</p><script type="math/tex; mode=display">\pmb{y}(\pmb{x})=\tilde{W}^\top\tilde{\pmb{x}}</script><p>其中，$W^\top=(\tilde{\pmb{w}}_1,\tilde{\pmb{w}}_2,\cdots,\tilde{\pmb{w}}_K)^\top$每行为$\tilde{\pmb{w}}_k^\top$，$\tilde{\pmb{w}}_k=(w_{k0},\pmb{w}_k^\top)^\top$为列向量，$\tilde{\pmb{x}}=(1,\pmb{x}^\top)^\top$为列向量。<br>一个新的输入$\pmb{x}$将被分到$y_k(\pmb{x})=\tilde{\pmb{w}}_k^\top\tilde{\pmb{x}}$最大的类别中。<br>对于训练集${\pmb{x}_n,\pmb{t}_n}$，其中$n=1,2,\cdots,N$，平方和误差函数为</p><script type="math/tex; mode=display">E_D(\tilde{W})=\frac{1}{2}Tr\{(\tilde{X}\tilde{W}-T)^\top(\tilde{X}\tilde{W}-T)\}</script><p>其中，$\tilde{X}=(\tilde{\pmb{x}}_1^\top,\tilde{\pmb{x}}_2^\top,\cdots,\tilde{\pmb{x}}_N^\top)^\top$，$T=(\tilde{\pmb{t}}_1^\top,\tilde{\pmb{t}}_2^\top,\cdots,\tilde{\pmb{t}}_N^\top)^\top$采用‘1-of-K’表示方式。求导可得参数矩阵最优解为</p><script type="math/tex; mode=display">\tilde{W}=(\tilde{X}^\top\tilde{X})^{-1}\tilde{X}^\top T=\tilde{X}^\dagger T</script><p>即可得判别函数为</p><script type="math/tex; mode=display">\pmb{y}(\pmb{x})=\tilde{W}^\top\tilde{\pmb{x}}=T^\top(\tilde{X}^\dagger)^\top\tilde{\pmb{x}}</script><p>然而，最小平方解对于离群点缺少鲁棒性，且通常不会给出较好的结果，这与高斯条件分布假设有关。</p><h2 id="Fisher线性判别函数"><a href="#Fisher线性判别函数" class="headerlink" title="Fisher线性判别函数"></a>Fisher线性判别函数</h2><p>针对二分类问题，我们将数据投影到一维，通过调整权向量，使类别之间分开最大。投影式为</p><script type="math/tex; mode=display">y=\pmb{w}^\top\pmb{x}</script><p>当得到最佳的投影之后，只需设置一个恰当的阈值即可将样本分类。<br>投影之后的类别均值差为</p><script type="math/tex; mode=display">m_2-m_1=\pmb{w}^\top(\pmb{m}_2-\pmb{m}_1)</script><p>其中，$\pmb{m}_1$和$\pmb{m}_2$为原始数据的类别均值向量，此处限制$\pmb{w}$为单位长度，即$\sum_iw_i^2=1$。<br>Fisher思想：最大化一个函数，使得类均值的投影分开较大，类内的方差较小。<br><strong>Fisher准则</strong>根据类间方差和类内方差的比值定义：</p><script type="math/tex; mode=display">J(\pmb{w})=\frac{(m_2-m_1)^2}{s_1^2+s_2^2}</script><p>其中，投影后的一维类内方差为$s_k^2=\sum_{n\in C_k}(y_n-m_k)^2$，$y_n=\pmb{w}^\top\pmb{x}_n$。<br>化简可得</p><script type="math/tex; mode=display">J(\pmb{w})=\frac{\pmb{w}^\top S_B\pmb{w}}{\pmb{w}^\top S_W\pmb{w}}</script><p>其中，$S_B$和$S_W$分别为类间协方差阵和类内协方差阵</p><script type="math/tex; mode=display">S_B=(\pmb{m}_2-\pmb{m}_1)(\pmb{m}_2-\pmb{m}_1)^\top \\S_W=\sum_{n\in C_1}(\pmb{x}_n-\pmb{m}_1)(\pmb{x}_n-\pmb{m}_1)^\top+\sum_{n\in C_2}(\pmb{x}_n-\pmb{m}_2)(\pmb{x}_n-\pmb{m}_2)^\top</script><p>对$J(\pmb{w})$求导可得</p><script type="math/tex; mode=display">(\pmb{w}^\top S_B\pmb{w})S_W\pmb{w}=(\pmb{w}^\top S_W\pmb{w})S_B\pmb{w}\\\pmb{w}\propto S_W^{-1}(\pmb{m}_2-\pmb{m}_1)</script><p>若类内协方差阵是各向同性的，则$S_W$正比于单位矩阵，$\pmb{w}$正比于原始数据的类均值差。<br>对于多分类问题，也有对应的Fisher判别函数。</p><h2 id="感知器算法"><a href="#感知器算法" class="headerlink" title="感知器算法"></a>感知器算法</h2><p>对输入向量先进行一个固定的非线性变换再构造一个线性模型，为</p><script type="math/tex; mode=display">y(\pmb{x})=f(\pmb{w}^\top\phi(\pmb{x}))</script><p>其中，$f(·)$为一个阶梯函数</p><script type="math/tex; mode=display">f(a)= \begin{cases} 1, & a\geqslant0 \\ -1, & a<0 \end{cases}</script><p>此处我们使用$t=+1$表示$C_1$，$t=-1$表示$C_2$。<br>我们需要找到合适的权向量$\pmb{w}$使得对所有的数据点有$\pmb{w}^\top\phi(\pmb{x}_n)\pmb{t}_n&gt;0$。<br><strong>感知器准则</strong>：对于误分类的数据$\pmb{x}_n$赋予误差，则误差函数为</p><script type="math/tex; mode=display">E_P(\pmb{w})=-\sum_{n\in \mathscr{M}}\pmb{w}^\top\phi_n\pmb{t}_n</script><p>其中，$\mathscr{M}$表示所有误分类数据的集合。对该误差函数使用随机梯度下降（SGD）</p><script type="math/tex; mode=display">\pmb{w}^{(\tau+1)}=\pmb{w}^{(\tau)}-\eta\nabla E_P(\pmb{w})=\pmb{w}^{(\tau)}+\eta\phi_n\pmb{t}_n</script><p>由于$f(·)$的设置，不失一般性可设$\eta=1$。<strong>则实际上SGD变为了：如果该数据点分类正确，则权向量保持不变；如果分类错误，对于类别$C_1$，把向量$\phi(\pmb{x}_n)$加到当前的权向量上得到新的权向量，对于类别$C_2$，则从当前的权向量中减掉$\phi(\pmb{x}_n)$得到新的权向量。</strong><br><strong>注</strong>：感知器学习规则并不保证在每个阶段都会减小整体误差。但由感知器收敛定理，如果训练数据线性可分，那么感知器算法可以保证在有限步骤内找到精确解。对于线性不可分数据，则永远不会收敛。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://xueshu.baidu.com/s?wd=paperuri%3A%28039d5c0802df10a9c04decf174c5409d%29&amp;filter=sc_long_sign&amp;sc_ks_para=q%3DPattern%20Recognition%20and%20Machine%20Learning%20%28Information%20Science%20and%20Statistics%29&amp;sc_us=9652015233931872413&amp;tn=SE_baiduxueshu_c1gjeupa&amp;ie=utf-8" target="_blank" rel="noopener">“Pattern Recognition and Machine Learning”</a></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 机器学习 </tag>
            
            <tag> 分类 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Python中正则表达式的特殊字符</title>
      <link href="/2018/09/re.html"/>
      <url>/2018/09/re.html</url>
      
        <content type="html"><![CDATA[<p>Python的 <strong>re</strong> 模块提供了正则表达式匹配的功能，其中经常会用到一些特殊字符，下面罗列它们以及各自的用法。</p><h2 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h2><ul><li><code>.</code>：匹配除了换行符<code>\n</code>之外的任何字符；</li><li><code>^</code>：匹配字符串的开头（需放到正则表达式开头）；</li><li><code>$</code>：匹配字符串的结尾（需放到正则表达式结尾）；<a id="more"></a></li><li><code>*</code>：匹配前一个表达式0次或多次。例如：<code>ab*</code>可匹配<code>a</code>，<code>ab</code>或<code>abbbbbbbbb</code>等；</li><li><code>+</code>：匹配前一个表达式1次或多次。例如：<code>ab*</code>可匹配<code>ab</code>或<code>abbbbbbbbb</code>等；</li><li><code>?</code>：匹配前一个表达式0次或1次。例如：<code>ab?</code>可匹配<code>a</code>和<code>ab</code>；</li><li><code>{m}</code>：精确匹配前一个表达式m次。例如：<code>ab{2}c</code>不能匹配<code>abc</code>，但却能匹配<code>abbc</code>。<strong>实测：可以匹配小于m个，但不能匹配大于m个，Why?</strong>，例如：<code>ab{2}</code>可以匹配<code>abbbbbc</code>，So精确模式？</li><li><code>{m,}</code>：匹配前一个表达式至少m次，贪婪模式（尽可能多的匹配）；</li><li><code>{m,n}</code>：匹配前一个表达式m到n次，贪婪模式；</li><li><code>{m,n}?</code>：匹配前一个表达式m到n次，非贪婪模式（尽可能少的匹配）；</li><li><code>[…]</code>：用来表示一组字符<ul><li>匹配其中的单个字符。例如：<code>[abc]</code>将会匹配<code>a</code>，<code>b</code>或<code>c</code>；</li><li>匹配一个范围，通过<code>-</code>表示。例如：<code>[a-z]</code>表示匹配任何小写字母，<code>[0-9][0-9]</code>表示匹配任意二位数字</li><li><code>[^…]</code>将匹配不在<code>[]</code>中的字符。例如：<code>[^abc]</code>将匹配除了<code>a</code>，<code>b</code>和<code>c</code>之外的字符。</li></ul></li><li><code>a|b</code>：匹配<code>a</code>或<code>b</code>；</li><li><code>(…)</code>：匹配括号内的表达式，作为一个整体；</li><li><code>\w</code>：匹配字母数字及下划线，等价于<code>[a-zA-Z0-9_]</code>；</li><li><code>\W</code>：匹配非字母数字及下划线，等价于<code>[^a-zA-Z0-9_]</code>；</li><li><code>\s</code>：匹配任意空白字符，等价于<code>[\t\n\r\f\v]</code><a href="#bib1" id="bib1ref"><sup>[1]</sup></a>；</li><li><code>\S</code>：匹配任意非空字符，等价于<code>[^\t\n\r\f\v]</code>；</li><li><code>\d</code>：匹配任意数字，等价于<code>[0-9]</code>；</li><li><code>\D</code>：匹配任意非数字，等价于<code>[^0-9]</code>。</li></ul><h2 id="巧用"><a href="#巧用" class="headerlink" title="巧用?"></a>巧用<code>?</code></h2><p>正则表达式中<code>*</code>，<code>+</code>和<code>?</code>都是贪婪的，它们尽可能多的匹配，但实际使用中有时并不可取。通过对其加一个<code>?</code>来限制匹配的次数，达到非贪婪的效果。<br>例如，原文本为：</p><blockquote><p>str = ‘AAsuixinBBAAsuixinBB’</p></blockquote><p>使用贪婪表达式<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = re.search(<span class="string">r'AA(.+)BB'</span>, str)</span><br><span class="line">print(res.group())</span><br></pre></td></tr></table></figure></p><p>将会输出<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AAsuixinBBAAsuixinBB</span><br></pre></td></tr></table></figure></p><p>使用非贪婪模式<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res = re.search(<span class="string">r'AA(.+?)BB'</span>, str)</span><br><span class="line">print(res.group())</span><br></pre></td></tr></table></figure></p><p>将会输出<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AAsuixinBB</span><br></pre></td></tr></table></figure></p><h3 id="与"><a href="#与" class="headerlink" title=".+?与.*?"></a><code>.+?</code>与<code>.*?</code></h3><ul><li>都是非贪婪匹配任意字符；</li><li><code>.+?</code>必须匹配到至少一个任意字符，而<code>.*?</code>可以匹配到0次。例如，<code>合理使用Python中正则表达式的特殊字符</code>，无论‘合理’与‘使用’之间有没有‘的’，使用<code>.*?</code>均可匹配到结果，而使用<code>.+?</code>将返回None。</li></ul><h2 id="re中常用的四个函数findall，match，search和sub"><a href="#re中常用的四个函数findall，match，search和sub" class="headerlink" title="re中常用的四个函数findall，match，search和sub"></a>re中常用的四个函数findall，match，search和sub</h2><h3 id="re-findall-pattern-string-flags-0"><a href="#re-findall-pattern-string-flags-0" class="headerlink" title="re.findall(pattern, string, flags=0)"></a>re.findall(pattern, string, flags=0)</h3><p>在string中从左到右匹配所有符合情况的字符串，返回一个list，如果没有匹配到，则返回一个空的list。其中flags表示匹配模式，比如忽略大小写，多行模式等。</p><h3 id="re-match-pattern-string-flags-0"><a href="#re-match-pattern-string-flags-0" class="headerlink" title="re.match(pattern, string, flags=0)"></a>re.match(pattern, string, flags=0)</h3><p>从字符串开头进行匹配，返回<strong>“匹配对象”</strong>，如果未匹配到，则返回None。<br><strong>“匹配对象”</strong>：布尔值为True，使用<code>.group()</code>或<code>.group(0)</code>返回匹配得到的字符串，使用<code>.group(1)</code>返回匹配的第一个括号内的字符串，依次类推……使用<code>.start()</code>和<code>.end()</code>分别返回匹配开始和结束的位置。</p><h3 id="re-search-pattern-string-flags-0"><a href="#re-search-pattern-string-flags-0" class="headerlink" title="re.search(pattern, string, flags=0)"></a>re.search(pattern, string, flags=0)</h3><p>在字符串任意位置进行匹配，查到第一个符合pattern的字符串，返回<strong>“匹配对象”</strong>，如果未匹配到，则返回None。</p><h3 id="re-sub-pattern-repl-string-count-0-flags-0"><a href="#re-sub-pattern-repl-string-count-0-flags-0" class="headerlink" title="re.sub(pattern, repl, string, count=0, flags=0)"></a>re.sub(pattern, repl, string, count=0, flags=0)</h3><p>返回将string中匹配的pattern替换为repl后的字符串，如果未匹配到则返回string。count表示可替换的最大次数，默认为0表示所有的都将被替换。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://docs.python.org/3/library/re.html" target="_blank" rel="noopener">https://docs.python.org/3/library/re.html</a><br><a href="http://www.runoob.com/python/python-reg-expressions.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-reg-expressions.html</a></p><hr><p><a id="bib1" href="#bib1ref"><sup>[1]</sup></a> ‘\r’: 换行，光标在上一行；’f’: 换页符；’\v’: 垂直制表符。</p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>评论系统从Disqus到Valine</title>
      <link href="/2018/09/valine.html"/>
      <url>/2018/09/valine.html</url>
      
        <content type="html"><![CDATA[<p>Yelee主题默认支持三款评论系统：Disqus，多说和友言评论，参见<a href="http://moxfive.coding.me/yelee/2.Basic-Usage/comment.html" target="_blank" rel="noopener">Yelee主题使用说明</a>。而目前多说和友言已经不能用了，Disqus也需要科学上网才可以加载使用，故添加一款新的评论系统势在必行。<br><strong>访客请参考<a href="#Valine的使用">这里</a>进行评论。</strong><br><a id="more"></a></p><h2 id="Valine"><a href="#Valine" class="headerlink" title="Valine"></a>Valine</h2><p><a href="https://valine.js.org/" target="_blank" rel="noopener">Valine</a>是一款优秀的评论系统，漂亮的界面、显示浏览器信息/系统信息、支持匿名评论、支持Markdown、Emoji等都是它的绝对优势，上图</p><p><center><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fvoai2bskoj319q0tmtaq.jpg" width="50%" height="50%"></center></p><h2 id="在Yelee中配置"><a href="#在Yelee中配置" class="headerlink" title="在Yelee中配置"></a>在Yelee中配置</h2><p>简单几步，即可完成主题的适配：</p><ol><li>按照<a href="https://valine.js.org/quickstart.html" target="_blank" rel="noopener">官网</a>提示，注册<a href="https://leancloud.cn/dashboard/login.html#/signup" target="_blank" rel="noopener">LeanCloud</a>账号并拿到APP ID和APP Key；</li><li><p>在<code>/yelee/_config.yml</code>中加入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">  on: true</span><br><span class="line">  appid: ***** # App ID</span><br><span class="line">  appkey: ***** # App Key</span><br><span class="line">  verify: true # 验证码</span><br><span class="line">  notify: true # 评论回复邮箱提醒</span><br><span class="line">  avatar: mp # 匿名者头像选项</span><br><span class="line">  placeholder: Just go go!</span><br></pre></td></tr></table></figure><p> <code>CDN:</code>中加入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">valine: //unpkg.com/valine@1.2.0-beta1/dist/Valine.min.js</span><br></pre></td></tr></table></figure></li><li><p>在<code>/yelee/layout/_partial/article.ejs</code>中加入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% &#125; else if (theme.valine.on)&#123; %&gt;</span><br><span class="line">    &lt;%- partial(&apos;comments/valine&apos;, &#123;</span><br><span class="line">        key: post.slug,</span><br><span class="line">        title: post.title,</span><br><span class="line">        url: config.url+url_for(post.path)</span><br><span class="line">      &#125;) %&gt;</span><br></pre></td></tr></table></figure><p> 缩进与其他的评论代码保持一致；</p></li><li><p>创建<code>/yelee/layout/_partial/comments/valine.ejs</code>文件，写入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;section id=&quot;comments&quot; style=&quot;margin: 2em; padding: 2em; background: rgba(255, 255, 255, 0.5)&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;vcomment&quot; class=&quot;comment&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;//cdn1.lncld.net/static/js/3.0.4/av-min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;&lt;%- theme.CDN.valine %&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">      new Valine(&#123;</span><br><span class="line">        el: &apos;#vcomment&apos;,</span><br><span class="line">        notify: &apos;&lt;%= theme.valine.notify %&gt;&apos;,</span><br><span class="line">        verify: &apos;&lt;%= theme.valine.verify %&gt;&apos;,</span><br><span class="line">        app_id: &quot;&lt;%= theme.valine.appid %&gt;&quot;,</span><br><span class="line">        app_key: &quot;&lt;%= theme.valine.appkey %&gt;&quot;,</span><br><span class="line">        placeholder: &quot;&lt;%= theme.valine.placeholder %&gt;&quot;,</span><br><span class="line">        avatar: &quot;&lt;%= theme.valine.avatar %&gt;&quot;</span><br><span class="line">      &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/section&gt;</span><br></pre></td></tr></table></figure></li><li><p>在<code>/yelee/source/css/_partial/mobile.styl</code>最后加入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#comments &#123;</span><br><span class="line">    margin: (10/16)rem 10px !important;</span><br><span class="line">    padding: 1rem !important;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>大功告成，执行<code>hexo g -d</code>即可看到Valine的评论框啦！</p><h2 id="Valine的使用"><a href="#Valine的使用" class="headerlink" title="Valine的使用"></a>Valine的使用</h2><p>评论框支持三个选项：昵称、邮箱、网址。<br><strong>昵称：</strong>展示在评论区的昵称；<br><strong>邮箱：</strong>在<a href="http://cn.gravatar.com/" target="_blank" rel="noopener">Gravatar</a>注册的邮箱，填写后可显示自定义的头像；要想收到回复提醒必须填写邮箱哦～<br><strong>网址：</strong>可设置为个人主页，评论后可通过点击昵称跳转到该网址。<br>别忘了，最重要的，Valine支持Markdown语法哦，快在评论区留言吧～</p><h2 id="Valine-Admin"><a href="#Valine-Admin" class="headerlink" title="Valine Admin"></a>Valine Admin</h2><p>一位大神对Valine进行了修改：<a href="https://github.com/panjunwen/Valine-Admin" target="_blank" rel="noopener">Valine Admin</a> 是 Valine 评论系统的扩展和增强，主要实现评论邮件通知、评论管理、垃圾评论过滤等功能。支持完全自定义的邮件通知模板，基于Akismet API实现准确的垃圾评论过滤。<br>根据<a href="https://panjunwen.com/valine-admin-document/" target="_blank" rel="noopener">配置手册</a>进行一番配置，现在本文下方的评论系统已经完美支持邮件提醒了。<br><strong>注</strong>：只有填写了邮箱才可以收到回复的邮件提醒哈～（这不是废话么……）</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.wangriyu.wang/2018/03-valine.html" target="_blank" rel="noopener">https://blog.wangriyu.wang/2018/03-valine.html</a><br><a href="https://panjunwen.com/valine-admin-document/" target="_blank" rel="noopener">https://panjunwen.com/valine-admin-document/</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术驿站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网站建设 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>从Hugo到Hexo</title>
      <link href="/2018/09/hexo.html"/>
      <url>/2018/09/hexo.html</url>
      
        <content type="html"><![CDATA[<p>很多人从Hexo迁移到Hugo，而我却相反，原因是看中了<a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" rel="noopener">这款主题Yelee</a>。双栏页面、自动更换背景、毛玻璃特效、随机动画、漂亮的代码界面以及非常全的第三方集成，几乎能想到的它都有……一眼看中，不能自拔……<br><a id="more"></a></p><h2 id="使用Hexo搭建博客"><a href="#使用Hexo搭建博客" class="headerlink" title="使用Hexo搭建博客"></a>使用Hexo搭建博客</h2><p><a href="https://hexo.io/zh-cn/index.html" target="_blank" rel="noopener">Hexo</a>主页上已经详细说明了搭建的步骤，和Hugo有很多相似之处，但由于Yelee主题的适配，确实为我带来了不少便利之处，很多东西只需修改两个配置文件<code>_config.yml</code>即可。</p><h2 id="Yelee主题的适配"><a href="#Yelee主题的适配" class="headerlink" title="Yelee主题的适配"></a>Yelee主题的适配</h2><p>Yelee作者对于该主题的使用写了详细的说明，很多步骤直接看<a href="http://moxfive.xyz/yelee/" target="_blank" rel="noopener">该文件</a>即可解决。<br>下面列出原文件中比较略/没有解决的几个问题：</p><h3 id="GitHub图标设置后不能显示"><a href="#GitHub图标设置后不能显示" class="headerlink" title="GitHub图标设置后不能显示"></a>GitHub图标设置后不能显示</h3><p>不显示的的原因是原文件中GitHub图标的地址已经失效了，如图<br><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fvn0lg3z4oj30ya04qdgr.jpg" alt=""><br><strong>解决方案：</strong>在<a href="http://www.iconfont.cn/" target="_blank" rel="noopener">这里</a>下载一个github图标（推荐# e6e6e6色的纯色图标）放到/yelee/source/img/下并命名为GitHub.png，然后在/yelee/source/css/_partial/customise/social-icon.styl的img-logo中加入<code>GitHub black 75</code>，接着删掉46-50行的即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.GitHub</span><br><span class="line">    background url(//cdn.bootcss.com/logos/0.2.0/github-octocat.svg) no-repeat white</span><br><span class="line">    background-size 90%</span><br><span class="line">    background-position 50% 100%</span><br></pre></td></tr></table></figure></p><h3 id="网站小图标favicon"><a href="#网站小图标favicon" class="headerlink" title="网站小图标favicon"></a>网站小图标favicon</h3><p>将favicon.ico放到<code>/yelee/source/</code>并在配置文件中对应修改后发现不能正常显示。一番探索之后才知道在本地部署草稿的时候是不能正常显示的，但只要执行<code>hexo d</code>正式发布之后即可正常显示。</p><h3 id="搜索引擎优化SEO"><a href="#搜索引擎优化SEO" class="headerlink" title="搜索引擎优化SEO"></a>搜索引擎优化SEO</h3><h4 id="百度"><a href="#百度" class="headerlink" title="百度"></a>百度</h4><p>通过这位同仁给出的优化方案<a href="https://wushao.xyz/posts/687b3092.html" target="_blank" rel="noopener">https://wushao.xyz/posts/687b3092.html</a> 做完之后发现百度不能抓取到sitemap<br>    <img src="https://ws1.sinaimg.cn/large/006tNc79ly1fvn0sanphdj31ia0bitan.jpg" alt=""><br>查了很多才知道是因为GitHub封了百度的蜘蛛……所以目前百度还是没有收录我的网址，哪位大神解决了麻烦在下面留言告诉我哦～</p><h4 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h4><p>直接在Google Search Console提交sitemap地址即可，过了一个小时就可以搜到了！</p><p><center><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fvn0xs0y16j317s17g4bv.jpg" width="80%"></center><br>当然是限制了时间才搜索的到……不免感觉有点小悲伤……<br><strong>Tips</strong>：<br>使用文件验证站长的时候，需要在下载的html文件前加入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">layout: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><p>否则Hexo会自动将该文件给生成页面，也就不能正常验证了。</p><h3 id="自动部署到GitHub-Pages"><a href="#自动部署到GitHub-Pages" class="headerlink" title="自动部署到GitHub Pages"></a>自动部署到GitHub Pages</h3><p>修改根目录下的_config.yml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repo: https://github.com/ShaneTian/ShaneTian.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></p><p>其中<code>repo</code>为自己的GitHub Pages地址。以后使用代码<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure></p><p>即可一键部署网站，前提是在配置文件中填写了自己的域名哦。</p><h2 id="对应的Hugo主题"><a href="#对应的Hugo主题" class="headerlink" title="对应的Hugo主题"></a>对应的Hugo主题</h2><p>一位大神已经将该主题迁移到了Hugo，详见<a href="https://github.com/NightFarmer/hugo-theme-yelee" target="_blank" rel="noopener">https://github.com/NightFarmer/hugo-theme-yelee</a> ，不过没有了首页动画等，但Hugo确实快啊。</p><h2 id="Hexo缺点"><a href="#Hexo缺点" class="headerlink" title="Hexo缺点"></a>Hexo缺点</h2><p>用过Hugo之后再来用Hexo，可以感觉到Hexo的生成速度明显比Hugo慢了一个等级，不过有这么好看的主题也就忍忍了。<br><strong>Tips</strong>：<br>另一款好看的Hexo主题：<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">Next</a>，示例网站见<a href="https://notes.doublemine.me/" target="_blank" rel="noopener">Doublemine</a>。</p>]]></content>
      
      
      <categories>
          
          <category> 技术驿站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网站建设 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>小米笔试题「小米大礼包」Python代码</title>
      <link href="/2018/09/mihomegiftbag.html"/>
      <url>/2018/09/mihomegiftbag.html</url>
      
        <content type="html"><![CDATA[<p>前几天一位朋友问我一道小米的笔试编程题，一看题目，这么简单？直接遍历list再用if判断不就行了。事实证明我还是too naive，写了几句便写不下去了……WTF……<br><a id="more"></a><br>话不多说，上题。</p><p><center> ![](https://ws3.sinaimg.cn/large/006tNbRwly1fvkjhd8b2aj30je0ebt9v.jpg)![](https://ws2.sinaimg.cn/large/006tNbRwly1fvkjj1nhnvj30jh06iaa5.jpg) </center><br>事实上，题目的本质为判断一个集合是否有子集之和等于一个固定的数字。可将问题分为两个子问题：</p><ol><li>包含最后一个数字，循环其余N-1个数字判断是否等于M-set[n-1]；</li><li>去掉最后一个数字，循环其余N-1个数字判断是否等于M</li></ol><p>GeeksforGeeks上一位大牛利用<strong>递归</strong>的思想给出了解题思路，我将部分代码修改如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">miHomeGiftBag</span><span class="params">(n, set, sum)</span>:</span></span><br><span class="line">    <span class="comment"># Base Cases</span></span><br><span class="line">    <span class="keyword">if</span> (sum == <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span> <span class="keyword">and</span> sum != <span class="number">0</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># If last element is greater than sum, then ignore it</span></span><br><span class="line">    <span class="keyword">if</span> (set[n - <span class="number">1</span>] &gt; sum):</span><br><span class="line">        <span class="keyword">return</span> miHomeGiftBag(set, n - <span class="number">1</span>, sum)</span><br><span class="line"></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    else, check if sum can be obtained by any of the following:</span></span><br><span class="line"><span class="string">    (a) including the last element</span></span><br><span class="line"><span class="string">    (b) excluding the last element</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> miHomeGiftBag(set, n - <span class="number">1</span>, sum) <span class="keyword">or</span> miHomeGiftBag(set, n - <span class="number">1</span>, sum - set[n - <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># get parameters from terminal</span></span><br><span class="line">N = int(input())</span><br><span class="line">gift_money = list(map(int, input(<span class="string">""</span>).split()))</span><br><span class="line"><span class="comment"># print(gift_money)</span></span><br><span class="line">M = int(input())</span><br><span class="line"></span><br><span class="line">res = miHomeGiftBag(gift_money, N, M)</span><br><span class="line"><span class="keyword">if</span> res:</span><br><span class="line">    print(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></p><p><strong>测试：</strong><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> python3 mi.py</span></span><br><span class="line">2</span><br><span class="line">1 4</span><br><span class="line">6</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> 0</span></span><br></pre></td></tr></table></figure></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> python3 mi.py</span></span><br><span class="line">4</span><br><span class="line">2 3 8 1</span><br><span class="line">5</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> 1</span></span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.geeksforgeeks.org/subset-sum-problem-dp-25/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/subset-sum-problem-dp-25/</a></p>]]></content>
      
      
      <categories>
          
          <category> 术业专攻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用HUGO搭建个人博客</title>
      <link href="/2018/09/hugo.html"/>
      <url>/2018/09/hugo.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>是一个用Go编写的静态站点生成器，由于具有丰富的主题资源和惊人的生成速度而备受青睐。本博客即是基于Hugo搭建，下面讲述一下我的建站历程以及踩的几个大坑（此处手动Doge…）。<br><a id="more"></a></p><h2 id="安装Hugo以及生成第一篇文章"><a href="#安装Hugo以及生成第一篇文章" class="headerlink" title="安装Hugo以及生成第一篇文章"></a>安装Hugo以及生成第一篇文章</h2><h3 id="安装Hugo"><a href="#安装Hugo" class="headerlink" title="安装Hugo"></a>安装Hugo</h3><p>如果你是<code>macOS</code>用户，请使用<code>Homebrew</code>快速安装<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install hugo</span><br></pre></td></tr></table></figure></p><p>如果你是<code>Windows</code>用户，请使用<code>Chocolatey</code>或者<code>Scoop</code>快速安装，取决于你使用什么包管理<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install hugo -confirm</span><br></pre></td></tr></table></figure></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install hugo</span><br></pre></td></tr></table></figure><p>如果你是<code>Debian</code>或<code>Ubuntu</code>用户，请使用<code>apt</code>快速安装<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install hugo</span><br></pre></td></tr></table></figure></p><p>基本上使用单行命令都可以成功安装Hugo，具体请移步<a href="https://gohugo.io/getting-started/installing" target="_blank" rel="noopener">这里</a>。</p><h3 id="生成文章"><a href="#生成文章" class="headerlink" title="生成文章"></a>生成文章</h3><p>使用如下命令新建一个名为“mysite”的网站：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hugo new site mysite</span><br></pre></td></tr></table></figure></p><p>接下来，在<a href="https://themes.gohugo.io/" target="_blank" rel="noopener">这里</a>找到一个漂亮的网站主题。相信我，Hugo的主题海洋会让你纠结到死……经过一番激烈的挣扎，我最终还是投靠给了<a href="https://themes.gohugo.io/casper/" target="_blank" rel="noopener">Casper</a>，没有什么能比一张大图占据整个屏幕带来的冲击感更强了……（说不定过段时间我又折腾着换别的主题了……）。言归正传，以Casper为例，将主题<code>clone</code>到本地的<code>themes</code>文件夹内，执行以下两句即可：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd themes</span><br><span class="line">git clone https://github.com/vjeantet/hugo-theme-casper.git casper</span><br></pre></td></tr></table></figure></p><p><code>mysite/content</code>是用来存放文档的地方，我们在其下建立一个新的<code>Markdown</code>文件：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hugo new post/first.md</span><br></pre></td></tr></table></figure></p><p>在<code>first.md</code>中写入一些内容，使用如下命令进行本地预览：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hugo server -t casper -D</span><br></pre></td></tr></table></figure></p><p>几乎瞬间编译成功，打开网址 <a href="http://localhost:1313/" target="_blank" rel="noopener">http://localhost:1313/</a> 即可查看本地生成的静态网站。</p><h2 id="适配主题"><a href="#适配主题" class="headerlink" title="适配主题"></a>适配主题</h2><p>Hugo的每个主题都会有不同的参数配置，而这些配置被存放在根目录下的<code>config.toml</code>文件中，对于<code>Casper</code>主题，<a href="https://github.com/vjeantet/hugo-theme-casper" target="_blank" rel="noopener">官方的GitHub</a>中已经对此作了说明，以下是我的配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">BaseUrl= &quot;https://shanetian.github.io/&quot;</span><br><span class="line">LanguageCode= &quot;zh-cn&quot;</span><br><span class="line">Title= &quot;I am thinking ...&quot;</span><br><span class="line">theme = &quot;casper&quot;</span><br><span class="line">paginate = 5</span><br><span class="line">DisqusShortname = &quot;suixin-1&quot;  # name in comments</span><br><span class="line">Copyright = &quot;All rights reserved - 2018&quot;</span><br><span class="line">canonifyurls = true</span><br><span class="line"></span><br><span class="line">[params]</span><br><span class="line">  description = &quot;路在脚下，心向远方&quot;</span><br><span class="line">  metadescription = &quot;Used as &apos;description&apos; meta tag for both home and index pages. If not set, &apos;description&apos; will be used instead&quot;</span><br><span class="line">  cover = &quot;images/boy_bicycle.jpg&quot;</span><br><span class="line">  author = &quot;SuiXin&quot;</span><br><span class="line">  authorlocation = &quot;Chengdu, China&quot;</span><br><span class="line">  authorwebsite = &quot;suixinblog.cn&quot;</span><br><span class="line">  authorbio= &quot;Every man dies, not every man really lives.&quot;</span><br><span class="line">  logo = &quot;images/bird.png&quot;</span><br><span class="line">  # googleAnalyticsUserID = &quot;UA-79101-12&quot;</span><br><span class="line">  # Optional RSS-Link, if not provided it defaults to the standard index.xml</span><br><span class="line">  # RSSLink = &quot;http://feeds.feedburner.com/...&quot;</span><br><span class="line">  githubName = &quot;ShaneTian&quot;</span><br><span class="line">  email = &quot;tianxinyqq@163.com&quot;</span><br><span class="line">  twitterName = &quot;ShaneTian6&quot;</span><br><span class="line">  # facebookName = &quot;&quot;</span><br><span class="line">  # codepenName = &quot;&quot;</span><br><span class="line">  # linkedinName = &quot;&quot;</span><br><span class="line">  # stackoverflowId = &quot;&quot;</span><br><span class="line">  # keybaseName = &quot;&quot;</span><br><span class="line">  # flickrName = &quot;&quot;</span><br><span class="line">  # instagramName = &quot;&quot;</span><br><span class="line">  # pinterestName = &quot;&quot;</span><br><span class="line">  # googlePlusName = &quot;&quot;</span><br><span class="line">  # set true if you are not proud of using Hugo (true will hide the footer note &quot;Proudly published with HUGO.....&quot;)</span><br><span class="line">  hideHUGOSupport = false</span><br><span class="line"></span><br><span class="line">  # Setting a value will load highlight.js and enable syntax highlighting using the style selected.</span><br><span class="line">  # See https://github.com/isagalaev/highlight.js/tree/master/src/styles for available styles</span><br><span class="line">  # A preview of above styles can be viewed at https://highlightjs.org/static/demo/</span><br><span class="line">  hjsStyle = &quot;atom-one-light&quot;</span><br><span class="line"></span><br><span class="line">  [params.social]</span><br><span class="line">    twitter = &quot;ShaneTian6&quot;</span><br><span class="line"></span><br><span class="line">[[menu.main]]</span><br><span class="line">  name = &quot;Home&quot;</span><br><span class="line">  weight = -1</span><br><span class="line">  identifier = &quot;blog&quot;</span><br><span class="line">  url = &quot;/&quot;</span><br><span class="line"></span><br><span class="line">[[menu.main]]</span><br><span class="line">  name = &quot;Machine Learning&quot;</span><br><span class="line">  weight = -2</span><br><span class="line">  identifier = &quot;ml&quot;</span><br><span class="line">  url = &quot;/tags/machine-learning&quot;</span><br><span class="line"></span><br><span class="line">[[menu.main]]</span><br><span class="line">  name = &quot;Others&quot;</span><br><span class="line">  weight = -3</span><br><span class="line">  identifier = &quot;other&quot;</span><br><span class="line">  url = &quot;/tags/others&quot;</span><br><span class="line"></span><br><span class="line">[[menu.main]]</span><br><span class="line">  name = &quot;About&quot;</span><br><span class="line">  weight = -4</span><br><span class="line">  identifier = &quot;about&quot;</span><br><span class="line">  url = &quot;/about&quot;</span><br><span class="line"></span><br><span class="line">  [permalinks]</span><br><span class="line">  post = &quot;/:year/:month/:day/:title/&quot;</span><br></pre></td></tr></table></figure></p><h2 id="文章内的配置"><a href="#文章内的配置" class="headerlink" title="文章内的配置"></a>文章内的配置</h2><p>使用命令<code>hugo new post/***.md</code>新建<code>Markdown</code>文件之后，文章开头会有默认的被<code>+++</code>包住的内容，这些内容即是该文章的配置。在<code>/mysite/archetypes/default.md</code>中可修改默认的配置。以下为我的默认配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+++</span><br><span class="line">title = &quot;&#123;&#123; replace .Name &quot;-&quot; &quot; &quot; | title &#125;&#125;&quot;  # 文章标题</span><br><span class="line">date = &#123;&#123; .Date &#125;&#125;  # 自动添加日期信息</span><br><span class="line">draft = true  # 设为false可被编译为HTML，true供本地修改</span><br><span class="line">tags = [&quot;&quot;]  # 文章标签，可设置多个，用逗号隔开。Hugo会自动生成标签的子URL</span><br><span class="line">comments = true  # 是否开启Disqus评论功能</span><br><span class="line">share = true  # 是否开启分享</span><br><span class="line">+++</span><br></pre></td></tr></table></figure></p><h2 id="代码着色"><a href="#代码着色" class="headerlink" title="代码着色"></a>代码着色</h2><p><code>Casper</code>主题在<code>config.toml</code>文件中的<code>hjsStyle</code>选项提供了<code>highlight.js</code>的代码着色。所有的代码主题和支持的语言可在<a href="https://highlightjs.org/static/demo/" target="_blank" rel="noopener">这里</a>看到。<br>但在实际的配置中更改配置选项发现并没有更改代码的颜色……我……<br>经历了一番数不清的Google之后发现，<code>Casper</code>主题的内置<code>HTML</code>文件设置的<code>highlight.js</code>版本为9.8.0，而现在的<code>highlight.js</code>已经更新到9.12.0，故只需修改<code>/mysite/themes/casper/layouts/partials/header.html</code>中几行代码为9.12.0即可：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; if .Site.Params.hjsStyle &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/&#123;&#123; .Site.Params.hjsStyle &#125;&#125;.min.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    &#123;&#123; if or .Site.Params.hjsExtraLanguages .Params.hjsExtraLanguages &#125;&#125;</span><br><span class="line">        &#123;&#123; range $index, $language := (union .Site.Params.hjsExtraLanguages .Params.hjsExtraLanguages) &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/&#123;&#123; $language &#125;&#125;.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        &#123;&#123; end &#125;&#125;</span><br><span class="line">    &#123;&#123; end &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">hljs.initHighlightingOnLoad();</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure></p><h2 id="关于图片"><a href="#关于图片" class="headerlink" title="关于图片"></a>关于图片</h2><p><code>Casper</code>主题需要设置一个封面图和一个作者头像，选好图片放置在<code>/static/images</code>并在<code>/config.toml</code>设置即可。<br>关于浏览器的小图标<code>favicon</code></p><p><center><img src="https://ws1.sinaimg.cn/large/006tNbRwly1fvimvpcx7dj30do02g74a.jpg" width="30%" \=""></center><br>可将喜欢的照片在<a href="https://realfavicongenerator.net/" target="_blank" rel="noopener">该网站</a>生成各种分辨率的<code>.ico</code>文件，将其命名为<code>favicon.ico</code>同样放置在<code>/static/images</code>即可。<code>apple-touch-icon</code>同理。</p><h2 id="发布网站到GitHub-Pages"><a href="#发布网站到GitHub-Pages" class="headerlink" title="发布网站到GitHub Pages"></a>发布网站到GitHub Pages</h2><p>在使用<code>hugo server -D</code>预览网站无误后可正式发布网站到域名供大家浏览。将要发布的文章内<code>draft</code>改为<code>false</code>后执行命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hugo</span><br></pre></td></tr></table></figure></p><p>可看到根目录下多出<code>/public</code>文件夹出来，该文件夹的内容即Hugo生成的整个静态网站。最终我们需要把这些静态网站的文件部署到一个地方，免费且稳定的GitHub Pages是一个很好的选择。具体操作如下：</p><ol><li>在GitHub新建一个Repository命名为<code>ShaneTian.github.io</code>，其中<code>ShaneTian</code>改成自己的GitHub账户名；</li><li>在<code>/mysite</code>外建立一个平行的文件夹，此处假设也命名为<code>/ShaneTian.github.io</code>；</li><li>进入<code>/public</code>文件夹将内容复制到<code>/ShaneTian.github.io</code>；</li><li>将<code>/ShaneTian.github.io</code>的内容<code>push</code>到远程仓库。</li></ol><p>以上命令可在命令行通过以下语句实现：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir ShaneTian.github.io</span><br><span class="line">cd mysite/public</span><br><span class="line">cp -r . ../../ShaneTian.github.io</span><br><span class="line">cd ../../ShaneTian.github.io</span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line">git commit -m "commit message"</span><br><span class="line">git remote add origin https://github.com/ShaneTian/ShaneTian.github.io.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure></p><p>完成以上命令后，等待一分钟左右即可在 <a href="https://shanetian.github.io/" target="_blank" rel="noopener">https://shanetian.github.io/</a> 访问你的网站。<br>以后每次更新文章后只用将生成的<code>/public</code>文件夹的静态网站内容复制到<code>/ShaneTian.github.io</code>，然后再<code>push</code>到远程仓库即可。也可将步骤写为<code>Shell</code>脚本，此处不再赘述。</p><h2 id="使用自己的域名"><a href="#使用自己的域名" class="headerlink" title="使用自己的域名"></a>使用自己的域名</h2><p>当然，GitHub的域名怎么能满足装*的心理，这时可以将网站设置为自己的域名。购买域名的地方很多，如国外知名网站<a href="https://sg.godaddy.com/zh/" target="_blank" rel="noopener">GoDaddy</a>，简体中文页面、支持支付宝付款、不用备案等都带来了很多方便。我的域名<a href="https://suixinblog.cn">suixinblog.cn</a>即是在此购买。购买域名后完成下面两步即可访问自己的域名：</p><ol><li>在上面存放静态网站的Repository设置里面Custom domain填上自己的域名点击save；</li><li><p>执行以下语句获得自己的GitHub Pages的IP：  </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping shanetian.github.io</span><br></pre></td></tr></table></figure><p>即可得到下面的IP地址：<br><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fvmz2x6huhj30zq04ytbn.jpg" alt=""></p></li><li>在域名提供商的网站配置DNS即可，以Godaddy为例配置两条记录如下：<br><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fvmz5res74j31ic0nqtbg.jpg" alt=""></li><li>可以在GitHub Pages设置强制https协议，这样你的网站就有安全锁啦～<br><img src="https://ws2.sinaimg.cn/large/006tNc79ly1fvmzc3x3wtj315m0y2jx9.jpg" alt=""><br><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fvmzdi2rllj309o01wjrf.jpg" alt=""></li></ol><p>大功告成！快去访问你的域名吧！<br><strong>Tips</strong>：<br>另外一款好看的Hugo主题：<a href="https://github.com/laozhu/hugo-nuo" target="_blank" rel="noopener">hugo-nuo</a></p>]]></content>
      
      
      <categories>
          
          <category> 技术驿站 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网站建设 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/09/index.html"/>
      <url>/2018/09/index.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.<br><a id="more"></a></p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo new <span class="string">"My New Post"</span></span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
  
  
</search>
